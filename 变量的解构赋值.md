# 变量的解构赋值

1. 默认值
	- 在进行结构赋值时，允许默认值，但是如果一个数组成员不严格等于undefined，默认值是不会生效的。
	    ```
	    var [x = 1] = [undefined];
	    x // 1
	
	    var [x = 1] = [null];
	    x // null
	    ```
	
	- 如果默认值是一个表达式，那么这个表达式是惰性求值的，即只有在用到的时候，才会求值。
2. 对象的解构赋值
	- 对象的解构赋值的内部机制，是先找到同名属性，然后再赋给对应的变量。
	`var { foo, bar } = { foo: "aaa", bar: "bbb" };`是
	`var { foo: foo, bar: bar } = { foo: "aaa", bar: "bbb" };`的简写。
	真正被赋值的是后者，而不是前者。而前者只是其占位的作用。如：
	    ```
	    var { foo: baz } = { foo: "aaa", bar: "bbb" };
	    baz // "aaa"
	    foo // error: foo is not defined
	    ```
3. 解构赋值时，如果等号右边是数值和布尔值，则会先转为对象。
4. **圆括号问题**(重要)
    - 模式，[{a:b}]= [{a:0,b:1}],在这个例子中，a才是模式，b不是。
    - 只要有可能，就不要在模式中放置圆括号。
    - 可以以下三种解构赋值不得使用圆括号。

    **（1）**变量声明语句中，不能带有圆括号。
    ```
    // 全部报错
    var [(a)] = [1];
    var {x: (c)} = {};
    var ({x: c}) = {};
    var {(x: c)} = {};
    var {(x): c} = {};
    var { o: ({ p: p }) } = { o: { p: 2 } };
    ```
    上面三个语句都会报错，因为它们都是变量声明语句，模式不能使用圆括号。

    **（2）**函数参数中，模式不能带有圆括号。函数参数也属于变量声明，因此不能带有圆括号。
    **（3）**赋值语句中，不能将整个模式，或嵌套模式中的一层，放在圆括号之中。
    ```
    // 全部报错
    ({ p: a }) = { p: 42 };
    ([a]) = [5];
    // 上面代码将整个模式放在圆括号之中，导致报错。

    // 报错
    [({ p: a }), { x: c }] = [{}, {}];
    // 上面代码将嵌套模式的一层，放在圆括号之中，导致报错。
    ```
    - 圆括号与花括号的问题
    ```
    // 错误的写法
    var x;
    {x} = {x: 1};
    // SyntaxError: syntax error
    ```
    上面代码的写法会报错，**因为JavaScript引擎会将{x}理解成一个代码块，从而发生语法错误**。只有不将大括号写在行首，避免JavaScript将其解释为代码块，才能解决这个问题。

    // 正确的写法
    `({x} = {x: 1});`
    上面代码将整个解构赋值语句，放在一个圆括号里面，就可以正确执行。