{"version":3,"sources":["webpack:///webpack/bootstrap 092d1698dae956579642?ade4*","webpack:///./web/scripts/source/midAutomn/indexMain.js","webpack:///./web/scripts/source/midAutomn/Stars.js","webpack:///./web/scripts/source/midAutomn/Moon.js","webpack:///./web/scripts/source/midAutomn/Meteor.js"],"names":["FESTIVAL","size","width","window","innerWidth","height","innerHeight","conut","stars","maxFrameInterval","initial","canvas","ctx","getContext","genarateItems","flash","Stars","moon","Moon","meteors","meteorGenerator","x","Math","random","push","Meteor","setTimeout","frameInterval","blink","draw","forEach","meteor","index","arr","flow","splice","requestAnimationFrame","bind","document","getElementById","Star","amount","generateStars","y","r","save","fillStyle","beginPath","arc","item","PI","fill","restore","offset","abs","canvasWidth","startCircule","stopCircule","gradient","createRadialGradient","addColorStop","fillRect","Metor","h","vx","vy","len","gra","lineTo","closePath"],"mappings":"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","file":"midAutomn/indexMain.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 092d1698dae956579642","import Stars    from './Stars';\nimport Moon     from './Moon';\nimport Meteor   from './Meteor';\n\n\nvar FESTIVAL = {\n    size:{\n        width: window.innerWidth,\n        height: window.innerHeight\n    },\n\n    conut:{\n        stars: 250\n    },\n\n    maxFrameInterval:10,\n\n    initial: function(canvas){\n        canvas.width = this.size.width;\n        canvas.height = this.size.height;\n        this.ctx = canvas.getContext('2d');\n\n        this.genarateItems();\n        this.flash();\n    },\n\n    genarateItems: function(){\n        this.stars = new Stars(this.ctx,this.size.width,this.size.height,this.conut.stars);\n        this.moon = new Moon(this.ctx,this.size.width,this.size.height,this.size.width);\n        this.meteors = [];\n        this.meteorGenerator();\n    },\n\n    //流星生成函数\n    meteorGenerator : function(){\n        //x位置偏移，以免经过月亮\n        let x = Math.random() * this.size.width + 400;\n        this.meteors.push(new Meteor(this.ctx, x, this.size.height));\n\n        //每隔随机时间，生成新流星\n        setTimeout(()=> {\n            this.meteorGenerator();\n        }, Math.random() * 2000);\n    },\n\n    flash: function(){\n        this.frameInterval = this.frameInterval || 0;\n        this.frameInterval++;\n        this.frameInterval%this.maxFrameInterval ===0 && this.stars.blink();\n\n        this.moon.draw();\n        this.stars.draw();\n\n        this.meteors.forEach((meteor, index, arr)=> {\n            //如果流星离开视野之内，销毁流星实例，回收内存\n            if (meteor.flow()) {\n                meteor.draw();\n            } else {\n                arr.splice(index, 1);\n            }\n        });\n\n        requestAnimationFrame(this.flash.bind(this));\n    }\n\n};\n\nFESTIVAL.initial(document.getElementById('canvas'));\n\n\n// WEBPACK FOOTER //\n// ./web/scripts/source/midAutomn/indexMain.js","/**\n * 星星为一堆集合，而不是具体的一个\n */\nclass Star{\n    /**\n     * [contructor 构造多个星星]\n     * @param  {[type]} ctx    [画布]\n     * @param  {[type]} height [星星可以存在的区域的高度]\n     * @param  {[type]} width  [星星可以存在的区域宽度]\n     * @param  {[type]} amount [需要产生的星星的]\n     * @return {[type]}        [description]\n     */\n    constructor(ctx,width,height,amount) {\n        this.ctx = ctx;\n        this.height = height;\n        this.width = width;\n        this.stars = this.generateStars(amount);\n    }\n\n    /**\n     * [generateStars 生产一定数量的星星，并保存在stars中]\n     * @param  {Number} amount [星星的数量]\n     * @return {[Object]}      [包含星星的属性]\n     */\n    generateStars(amount){\n        let stars = [];\n        while(amount--){\n            stars.push({\n                x: this.width * Math.random(),\n                y: this.height * Math.random(),\n                r: Math.random() + 0.55\n            });\n        }\n        return stars;\n    }\n\n    /**\n     * [draw 画星星]\n     * @return {[type]} [description]\n     */\n    draw(){\n         let ctx = this.ctx;\n         ctx.save();\n         ctx.fillStyle = '#fff';\n         this.stars.forEach(item =>{\n            ctx.beginPath();\n            ctx.arc(item.x,item.y,item.r,0,2*Math.PI);\n            ctx.fill();\n         });\n         ctx.restore();\n    }\n\n    /**\n     * [blink 动态改变星星的半径，制造闪烁效果]\n     * @return {[type]} [description]\n     */\n    blink() {\n        this.stars.forEach(item => {\n            let offset = Math.random() > 0.5 ? 0.4 : -0.4;\n            item.r = Math.abs(item.r + offset);\n            item.r > 1.5 && (item.r -= offset);\n        });\n    }\n}\n\nexport default Star;\n\n\n// WEBPACK FOOTER //\n// ./web/scripts/source/midAutomn/Stars.js","\n/**\n * 画月亮\n */\nclass Moon{\n    // 初始化Moon所在画布\n    constructor(ctx,width,height,canvasWidth){\n        this.ctx = ctx;\n        this.width = width;\n        this.height = height;\n        this.canvasWidth = canvasWidth;\n    }\n\n    draw(){\n        let ctx = this.ctx;\n        //  渐变开始的圆的位置\n        let startCircule = {\n            x:200,\n            y:200,\n            r:80\n        };\n        // 渐变结束的圆的位置\n        let stopCircule = {\n            x:200,\n            y:200,\n            r:800\n        };\n        let gradient = ctx.createRadialGradient(startCircule.x, startCircule.y, startCircule.r,\n            stopCircule.x, stopCircule.y, stopCircule.r);\n\n        //径向渐变,为开始圆和结束圆之间添加颜色渐变\n        gradient.addColorStop(0, 'rgb(254, 251, 207)');\n        gradient.addColorStop(0.01, 'rgb(70,70,80)');\n        gradient.addColorStop(0.2, 'rgb(40,40,50)');\n        gradient.addColorStop(0.4, 'rgb(20,20,30)');\n        gradient.addColorStop(1, 'rgb(0,0,10)');\n\n        ctx.save();\n        ctx.fillStyle = gradient;\n        ctx.fillRect(0,0,this.width,this.height);\n        ctx.restore();\n    }\n\n    move(){\n\n    }\n}\n\nexport default Moon;\n\n\n// WEBPACK FOOTER //\n// ./web/scripts/source/midAutomn/Moon.js","/**\n * 流星\n */\nclass Metor{\n    /**\n     * [constructor description]\n     * @param  {[type]} ctx [description]\n     * @param  {[type]} x   [description]\n     * @param  {[type]} h   [description]\n     * @return {[type]}     [description]\n     */\n     constructor(ctx, x, h) {\n        this.ctx = ctx;\n        this.x = x;\n        this.y = 0;\n        this.h = h;\n        this.vx = -(4 + Math.random() * 4);\n        this.vy = -this.vx;\n        this.len = Math.random() * 300 + 500;\n    }\n\n    flow() {\n        //判定流星出界\n        if (this.x < -this.len || this.y > this.h + this.len) {\n            return false;\n        }\n        this.x += this.vx;\n        this.y += this.vy;\n        return true;\n    }\n\n    draw(){\n        let ctx = this.ctx;\n        //径向渐变，从流星头尾圆心，半径越大，透明度越高\n        let gra = ctx.createRadialGradient(this.x, this.y, 0, this.x, this.y, this.len);\n\n        const PI = Math.PI;\n        gra.addColorStop(0, 'rgba(255,255,255,1)');\n        gra.addColorStop(1, 'rgba(0,0,0,0)');\n        ctx.save();\n        ctx.fillStyle = gra;\n        ctx.beginPath();\n        // 画流星头,半圆\n        ctx.arc(this.x,this.y,1,PI/4,PI*5/4);\n\n        //绘制流星尾，三角形\n        ctx.lineTo(this.x + this.len, this.y - this.len);\n        ctx.closePath();\n        ctx.fill();\n        ctx.restore();\n    }\n}\n\nexport default Metor;\n\n\n// WEBPACK FOOTER //\n// ./web/scripts/source/midAutomn/Meteor.js"],"sourceRoot":""}