{"version":3,"sources":["webpack:///webpack/bootstrap 051439c1575a8e301a79?3e3e","webpack:///./web/scripts/source/midAutomn/indexMain.js","webpack:///./web/scripts/source/midAutomn/Stars.js","webpack:///./web/scripts/source/midAutomn/Moon.js","webpack:///./web/scripts/source/midAutomn/Meteor.js"],"names":["FESTIVAL","size","width","window","innerWidth","height","innerHeight","conut","stars","maxFrameInterval","initial","canvas","ctx","getContext","genarateItems","flash","moon","meteors","meteorGenerator","x","Math","random","push","setTimeout","frameInterval","blink","draw","forEach","meteor","index","arr","flow","splice","requestAnimationFrame","bind","document","getElementById","Star","amount","generateStars","y","r","save","fillStyle","beginPath","arc","item","PI","fill","restore","offset","abs","Moon","canvasWidth","startCircule","stopCircule","gradient","createRadialGradient","addColorStop","fillRect","Metor","h","vx","vy","len","gra","lineTo","closePath"],"mappings":"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","file":"midAutomn\\indexMain.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 051439c1575a8e301a79","import Stars    from './Stars';\r\nimport Moon     from './Moon';\r\nimport Meteor   from './Meteor';\r\n\r\n\r\nvar FESTIVAL = {\r\n    size:{\r\n        width: window.innerWidth,\r\n        height: window.innerHeight\r\n    },\r\n\r\n    conut:{\r\n        stars: 250\r\n    },\r\n\r\n    maxFrameInterval:10,\r\n\r\n    initial: function(canvas){\r\n        canvas.width = this.size.width;\r\n        canvas.height = this.size.height;\r\n        this.ctx = canvas.getContext('2d');\r\n\r\n        this.genarateItems();\r\n        this.flash();\r\n    },\r\n\r\n    genarateItems: function(){\r\n        this.stars = new Stars(this.ctx,this.size.width,this.size.height,this.conut.stars);\r\n        this.moon = new Moon(this.ctx,this.size.width,this.size.height,this.size.width);\r\n        this.meteors = [];\r\n        this.meteorGenerator();\r\n    },\r\n\r\n    //流星生成函数\r\n    meteorGenerator : function(){\r\n        //x位置偏移，以免经过月亮\r\n        let x = Math.random() * this.size.width + 800;\r\n        this.meteors.push(new Meteor(this.ctx, x, this.size.height));\r\n\r\n        //每隔随机时间，生成新流星\r\n        setTimeout(()=> {\r\n            this.meteorGenerator();\r\n        }, Math.random() * 2000);\r\n    },\r\n\r\n    flash: function(){\r\n        this.frameInterval = this.frameInterval || 0;\r\n        this.frameInterval++;\r\n        this.frameInterval%this.maxFrameInterval ===0 && this.stars.blink();\r\n\r\n        this.moon.draw();\r\n        this.stars.draw();\r\n\r\n        this.meteors.forEach((meteor, index, arr)=> {\r\n            //如果流星离开视野之内，销毁流星实例，回收内存\r\n            if (meteor.flow()) {\r\n                meteor.draw();\r\n            } else {\r\n                arr.splice(index, 1);\r\n            }\r\n        });\r\n\r\n        requestAnimationFrame(this.flash.bind(this));\r\n    }\r\n\r\n};\r\n\r\nFESTIVAL.initial(document.getElementById('canvas'));\n\n\n// WEBPACK FOOTER //\n// ./web/scripts/source/midAutomn/indexMain.js","/**\r\n * 星星为一堆集合，而不是具体的一个\r\n */\r\nclass Star{\r\n    /**\r\n     * [contructor 构造多个星星]\r\n     * @param  {[type]} ctx    [画布]\r\n     * @param  {[type]} height [星星可以存在的区域的高度]\r\n     * @param  {[type]} width  [星星可以存在的区域宽度]\r\n     * @param  {[type]} amount [需要产生的星星的]\r\n     * @return {[type]}        [description]\r\n     */\r\n    constructor(ctx,height,width,amount) {\r\n        this.ctx = ctx;\r\n        this.height = height;\r\n        this.width= height;\r\n        this.stars = this.generateStars(amount);\r\n    }\r\n\r\n    /**\r\n     * [generateStars 生产一定数量的星星，并保存在stars中]\r\n     * @param  {Number} amount [星星的数量]\r\n     * @return {[Object]}      [包含星星的属性]\r\n     */\r\n    generateStars(amount){\r\n        let stars = [];\r\n        while(amount--){\r\n            stars.push({\r\n                x: this.width * Math.random(),\r\n                y: this.height * Math.random(),\r\n                r: Math.random() + 0.55\r\n            });\r\n        }\r\n        return stars;\r\n    }\r\n\r\n    /**\r\n     * [draw 画星星]\r\n     * @return {[type]} [description]\r\n     */\r\n    draw(){\r\n         let ctx = this.ctx;\r\n         ctx.save();\r\n         ctx.fillStyle = '#fff';\r\n         this.stars.forEach(item =>{\r\n            ctx.beginPath();\r\n            ctx.arc(item.x,item.y,item.r,0,2*Math.PI);\r\n            ctx.fill();\r\n         });\r\n         ctx.restore();\r\n    }\r\n\r\n    /**\r\n     * [blink 动态改变星星的半径，制造闪烁效果]\r\n     * @return {[type]} [description]\r\n     */\r\n    blink() {\r\n        this.stars.forEach(item => {\r\n            let offset = Math.random() > 0.5 ? 0.4 : -0.4;\r\n            item.r = Math.abs(item.r + offset);\r\n            item.r > 1.5 && (item.r -= offset);\r\n        });\r\n    }\r\n}\r\n\r\nexport default Star;\n\n\n// WEBPACK FOOTER //\n// ./web/scripts/source/midAutomn/Stars.js","\r\n/**\r\n * 画月亮\r\n */\r\nclass Moon{\r\n    // 初始化Moon所在画布\r\n    constructor(ctx,width,height,canvasWidth){\r\n        this.ctx = ctx;\r\n        this.width = width;\r\n        this.height = height;\r\n        this.canvasWidth = canvasWidth;\r\n    }\r\n\r\n    draw(){\r\n        let ctx = this.ctx;\r\n        //  渐变开始的圆的位置\r\n        let startCircule = {\r\n            x:200,\r\n            y:200,\r\n            r:80\r\n        };\r\n        // 渐变结束的圆的位置\r\n        let stopCircule = {\r\n            x:200,\r\n            y:200,\r\n            r:800\r\n        };\r\n        let gradient = ctx.createRadialGradient(startCircule.x, startCircule.y, startCircule.r,\r\n            stopCircule.x, stopCircule.y, stopCircule.r);\r\n\r\n        //径向渐变,为开始圆和结束圆之间添加颜色渐变\r\n        gradient.addColorStop(0, 'rgb(255,255,255)');\r\n        gradient.addColorStop(0.01, 'rgb(70,70,80)');\r\n        gradient.addColorStop(0.2, 'rgb(40,40,50)');\r\n        gradient.addColorStop(0.4, 'rgb(20,20,30)');\r\n        gradient.addColorStop(1, 'rgb(0,0,10)');\r\n\r\n        ctx.save();\r\n        ctx.fillStyle = gradient;\r\n        ctx.fillRect(0,0,this.width,this.height);\r\n        ctx.restore();\r\n    }\r\n\r\n    move(){\r\n\r\n    }\r\n}\r\n\r\nexport default Moon;\n\n\n// WEBPACK FOOTER //\n// ./web/scripts/source/midAutomn/Moon.js","/**\r\n * 流星\r\n */\r\nclass Metor{\r\n    /**\r\n     * [constructor description]\r\n     * @param  {[type]} ctx [description]\r\n     * @param  {[type]} x   [description]\r\n     * @param  {[type]} h   [description]\r\n     * @return {[type]}     [description]\r\n     */\r\n     constructor(ctx, x, h) {\r\n        this.ctx = ctx;\r\n        this.x = x;\r\n        this.y = 0;\r\n        this.h = h;\r\n        this.vx = -(4 + Math.random() * 4);\r\n        this.vy = -this.vx;\r\n        this.len = Math.random() * 300 + 500;\r\n    }\r\n\r\n    flow() {\r\n        //判定流星出界\r\n        if (this.x < -this.len || this.y > this.h + this.len) {\r\n            return false;\r\n        }\r\n        this.x += this.vx;\r\n        this.y += this.vy;\r\n        return true;\r\n    }\r\n\r\n    draw(){\r\n        let ctx = this.ctx;\r\n        //径向渐变，从流星头尾圆心，半径越大，透明度越高\r\n        let gra = ctx.createRadialGradient(this.x, this.y, 0, this.x, this.y, this.len);\r\n\r\n        const PI = Math.PI;\r\n        gra.addColorStop(0, 'rgba(255,255,255,1)');\r\n        gra.addColorStop(1, 'rgba(0,0,0,0)');\r\n        ctx.save();\r\n        ctx.fillStyle = gra;\r\n        ctx.beginPath();\r\n        // 画流星头,半圆\r\n        ctx.arc(this.x,this.y,1,PI/4,PI*5/4);\r\n\r\n        //绘制流星尾，三角形\r\n        ctx.lineTo(this.x + this.len, this.y - this.len);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        ctx.restore();\r\n    }\r\n}\r\n\r\nexport default Metor;\n\n\n// WEBPACK FOOTER //\n// ./web/scripts/source/midAutomn/Meteor.js"],"sourceRoot":""}